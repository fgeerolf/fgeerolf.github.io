---
title: \href{https://fgeerolf.github.io/teaching/ECON221/R.pdf}{Intro to R Statistical Software}
subtitle: \href{https://fgeerolf.github.io/teaching/ECON221/}{UCLA - Econ 221 - Fall 2018}
author: \href{https://fgeerolf.github.io/}{Fran√ßois Geerolf}
header-includes:
- \usepackage{fancyhdr}
- \usepackage{lipsum}
- \pagestyle{fancy}
- \fancyhf{}
- \fancyfoot[C]{\thepage}
- \fancyhead[L]{\href{https://fgeerolf.github.io/teaching/ECON221/}{UCLA - Econ 221 - Fall 2018 - Geerolf}}
- \fancyhead[R]{\href{https://fgeerolf.github.io/teaching/ECON221/R-intro.pdf}{Intro to R}}
output:
  pdf_document:
    citation_package: natbib
    fig_caption: yes
    toc: no
  html_document: default
---

<br/>

"Programs must be written for people to read and only incidentally for machines to execute." ([Hal Abelson](https://en.wikipedia.org/wiki/Hal_Abelson))

## Getting started with R Statistical Software

**Downloading.** You need to install `R` and `Rstudio`:

1. You can get **R statistical software** on the UCLA mirror [here](http://cran.stat.ucla.edu/). Here is a [direct link](http://cran.stat.ucla.edu/bin/macosx/R-3.5.1.pkg) to "Feather Spray" (R version 3.5.1) for Mac OSX - check first that there does not exist anything more recent. Here is a [direct link](http://cran.stat.ucla.edu/bin/windows/base/R-3.5.1-win.exe) for Windows.

2. I recommend you use a Graphical User Interface (GNU) for R such as **R Studio**. You can get the latest release here: [download here](https://www.rstudio.com/products/rstudio/download/#download).

**Introduction to R.** I recommend [cheatsheets](https://www.rstudio.com/resources/cheatsheets/) to get started on R. Many are available, but the 2 main cheatsheets are:

- A [Base R Cheatsheet](https://www.rstudio.com/wp-content/uploads/2016/05/base-r.pdf).
- An [Advanced R Cheatsheet](https://www.rstudio.com/wp-content/uploads/2016/02/advancedR.pdf).  

[Datacamp](https://www.datacamp.com/tracks/learn-statistics-with-r) also has great learning tools for `R`, as well as `Python`.


## R-markdown (Rmd)

`R-markdown` is a great tool for keeping your workflow organized and keeping track of each one of your research projects: you can add \LaTeX  very easily, images, regression tables, graphs, etc. Again, cheatsheets are a good way to learn. There are two main cheatsheets:

- A [Beginner's R-Markdown Cheatsheet](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf). 
- An [Advanced R-Markdown Cheatsheet](https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf).

You may also learn from the reference guide [here](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf).

## Necessary Packages

I will mostly be using `tidyverse`, from [Hadley Wickham](http://hadley.nz), for data manipulation as well as plotting data. [This cheatsheet](https://s3.amazonaws.com/assets.datacamp.com/blog_assets/Tidyverse+Cheat+Sheet.pdf) has a beginner's introduction to `tidyverse`, and `tidyverse` is presented on [this blogpost](https://rviews.rstudio.com/2017/06/08/what-is-the-tidyverse/). `tidyverse` is a powerful collection of R packages that are data tools for transforming and visualizing data. [Datacamp](https://www.datacamp.com/) has a [free tutorial](https://www.datacamp.com/courses/introduction-to-the-tidyverse) for `tidyverse`, which can get you started. The following packages are particularly useful:

* `dplyr` for data manipulation. [Cheatsheet](https://ugoproto.github.io/ugo_r_doc/dplyr.pdf). You will find a tutorial in 4 parts here: [Part 1](https://suzan.rbind.io/2018/01/dplyr-tutorial-1/) / [Part 2](https://suzan.rbind.io/2018/02/dplyr-tutorial-2/) / [Part 3](https://suzan.rbind.io/2018/02/dplyr-tutorial-3/) / [Part 4](https://suzan.rbind.io/2018/04/dplyr-tutorial-4/). Note, in particular, the use of pipes %>%:
    + x %>% f(y) is the same as f(x, y).
    + y %>% f(x, ., z) is the same as f(x, y, z).
"Piping" with %>% makes code more readable. For example, the following code computes an average of `Sepal.Width` by `Species`in the `iris` database, and then orders the Species by their average `Sepal.Width`. More generally, instead of writing $i(h(g(f())))$ which is very hard to read when $f$, $g$, $h$ and $i$ are complex functions, pipes allow you to write functions in the order they are being called: x %>% f %>% g %>% h %>% i. Try it !
    ```{r, warning = FALSE, include = FALSE, echo = FALSE, warning = FALSE}
    pklist <- c("tidyverse")
    source("https://fgeerolf.github.io/code/load-packages.R")
    ```
    ```{r}
    iris %>%
      group_by(Species) %>%
      summarise(avg = mean(Sepal.Width)) %>%
      arrange(avg)
    ```


* `ggplot2` for data visualization. [Cheatsheet](https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf). Combined with `tidyverse`, `ggplot2` proves very powerful. For example, below is a visualization of the RGB additive color model.
```{r, fig.align = "center", fig.height = 4, fig.width = 6}
expand.grid(r = seq(0, 1, 0.1), g = seq(0, 1, 0.1), b = seq(0, 1, 0.1)) %>%
  ggplot() + facet_wrap( ~ b) +
  scale_x_continuous(name = "Levels of Red (0 to 1)", 
                     breaks = seq(0.05, 1.05, 0.2), 
                     labels = seq (0, 1, 0.2)) +
  scale_y_continuous(name = "Levels of Green (0 to 1)", 
                     breaks = seq(0.05, 1.05, 0.2), 
                     labels = seq(0, 1, 0.2)) +
  scale_fill_identity() +
  geom_rect(aes(xmin = r, xmax = r + resolution(r), 
                ymin = g, ymax = g + resolution(g), 
                fill = rgb(r, g, b)),  
            color = "white", size = 0.1) + 
  ggtitle("RGB Additive Color Model: By Levels of Blue (0 to 1)")
```

* `stringr` for string manipulation. A cheatsheet is available [here](http://edrub.in/CheatSheets/cheatSheetStringr.pdf). If you do want to work on string variables a lot, for example to do web scrapping, then you should learn about [regular expressions](https://www.rstudio.com/wp-content/uploads/2016/09/RegExCheatsheet.pdf).

* `readr` to read in data. A cheatsheet is provided [here](https://ugoproto.github.io/ugo_r_doc/data-import.pdf).

In addition to the `tidyverse` collection of R packages, I also use the following packages:

* `lubridate` for working with dates (very useful in macroeconomics !). A cheatsheet is provided [here](https://evoldyn.gitlab.io/evomics-2018/ref-sheets/R_lubridate.pdf).

## Other Packages

Here are other potentially useful packages:  

* `tidytext` for analyzing text with the `tidyverse` tools. A great introduction to this package is provided [here](https://www.tidytextmining.com/tidytext.html).  
* `bookdown` as a great complement to R-markdown, in order to write more advanced documents. A great introduction is also provided [here](https://bookdown.org/yihui/bookdown/).